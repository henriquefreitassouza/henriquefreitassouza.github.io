<!DOCTYPE html>
<html class="" lang="pt" dir="ltr">
  <head>
    <title>Lidando com diferen√ßas nas ferramentas de testes e de analytics | Automa√ß√£o de Dados</title>



<meta http-equiv="Content-Type" content="text/html" charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="description" content="Lidando com diferen√ßas nas ferramentas de testes e de analytics | Automa√ß√£o de Dados" />

<meta property="og:url" content="https://www.automacaodedados.com.br/stories/dados-de-testes-ab-no-google/">
<meta property="og:locale" content="pt" />
<meta property="og:title" content="Lidando com diferen√ßas nas ferramentas de testes e de analytics | Automa√ß√£o de Dados">
<meta property="og:description" content="Lidando com diferen√ßas nas ferramentas de testes e de analytics | Automa√ß√£o de Dados">
<meta property="og:site_name" content="Automa√ß√£o de Dados">

<meta name="twitter:card" content="summary_large_image">


<meta property="og:type" content="article">
<meta property="article:author" content="Henrique Freitas Souza" />
<meta property="article:published_time" content="2017-11-30 08:39:00 &#43;0000 UTC" />
<meta property="article:modified_time" content="2021-10-31 08:39:00 &#43;0000 UTC" />
<meta name="twitter:label1" content="Tempo estimado para a leitura" />
<meta name="twitter:data1" content="12 minutos" />

<meta property="article:tag" content="Analytics" />
<meta property="article:section" content="Analytics" />



<meta property="og:image" content="https://www.automacaodedados.com.br/stories/dados-de-testes-ab-no-google/images/thumbnail.jpg">
<meta name="twitter:image" content="https://www.automacaodedados.com.br/stories/dados-de-testes-ab-no-google/images/thumbnail.jpg">
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="400" />

<meta name="og:image:alt" content="Dashboard no Google Analytics mostrando dados de testes A/B.">

    <link href="https://www.automacaodedados.com.br/images/favicon.ico" rel="icon" type="image/x-icon" />

	
	<link rel="alternate" hreflang="en" href="https://www.automacaodedados.com.br/en/stories/dados-de-testes-ab-no-google/" title="English">
	

<link rel="preload" as="script" href="/js/ui.min.js" />
<link rel="preload" as="script" href="/js/theme.min.js" />
<link rel="preload" as="style" href="/css/fonts.min.css" />
<link rel="preload" as="style" href="/css/main.min.css" />
<link rel="stylesheet" href="/css/fonts.min.css" />
<link rel="stylesheet" href="/css/main.min.css" />
<script src="/js/ui.min.js" async></script>

    
  </head>
  <body class="overflow-x-hidden dark:bg-secondary">
    <div class="flex flex-col h-screen">
      <a class="sr-only focus:sr-only" href="#content">Pular para o conte√∫do</a>
      <header class="flex flex-col justify:between">
  <div class="container container-box mx-auto lg:px-0">
    <div class="px-2 flex flex-wrap justify-between items-center">
      <div class="w-6/12 md:w-auto">
        <a href="/" class="flex items-center mr-2 font-title no-underline hover:no-underline focus:outline-none focus:ring-2 focus:ring-offset-8 focus:ring-secondary-darker dark:ring-offset-secondary dark:ring-white">
          <img class="mr-2 w-16 h-8" id="site-logo" src="https://www.automacaodedados.com.br/images/automacaodedados_logo.svg" alt="Logo Automa√ß√£o de Dados">
          <span class="text-base font-title leading-none mb-0 break-words dark:text-white">Automa√ß√£o de Dados</span>
        </a>
      </div>
      <div class="flex items-center lg:order-last">
        <a class="p-2 mr-2 inline-block no-underline focus:outline-none focus:ring-2 focus:ring-secondary-darker dark:focus:ring-white lg:mr-0 lg:ml-2" id="theme-menu-toggle" href="#" title="Trocar entre temas escuro e claro">
          <span class="sr-only">Trocar entre temas escuro e claro</span>
          <i class="w-7 h-7" id="theme-toggle-icon"></i>
        </a>
        <a id="navigation-menu-toggle" class="p-2 inline-block text-base no-underline focus:outline-none focus:ring-2 focus:ring-secondary-darker dark:focus:ring-white lg:hidden" role="button" aria-owns="main-menu" aria-controls="main-menu" aria-expanded="false" href="#main-menu">
          <span class="sr-only">Abrir e fechar navega√ß√£o principal</span>
          <i class="navigation-menu-icon w-7 h-7 dark:filter dark:invert" id="navigation-toggle-icon"></i>
        </a>
      </div>
      <div id="main-menu" class="flex flex-grow mt-4 hidden targeted:block lg:block lg:w-auto lg:mt-0" aria-labelledby="navigation-menu-toggle">
  <div class="container mx-auto">
    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-end">
      <nav role="navigation" itemscope itemtype="https://schema.org/SiteNavigationElement">
        <ul class="ml-auto mb-2 lg:mb-0">
          
          <li class="list-none lg:inline-block" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
            <a class="py-2 inline-block no-underline hover:text-gray-900 hover:underline dark:hover:text-white lg:p-2 lg:mr-2" href="/stories" itemprop="item">
              <span class="text-base dark:text-white" itemprop="name">Todas as Hist√≥rias</span>
            </a>
          </li>
          
        </ul>
      </nav>
      <div itemscope itemtype="https://schema.org/WebSite">
  <form class="inline-search flex p-2 mb-2 border-2 rounded-lg dark:bg-white lg:mb-0" itemprop="potentialAction" itemscope itemtype="https://schema.org/SearchAction" action="/search/" role="search" method="get">
    <meta itemprop="target" content="https://www.automacaodedados.com.br/search/">
    <label class="sr-only" for="q">Buscar hist√≥rias</label>
    <input class="text-sm px-4 w-full focus:outline-none focus:border-transparent dark:text-gray-900" itemprop="query" id="q" name="q" type="search" aria-label="Buscar em todo o site" placeholder='Buscar hist√≥rias'>
    <button class="p-2 text-base focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-secondary-darker" type="submit">
      <span class="sr-only">Iniciar a busca</span>
      <i class="search-icon w-4 h-4"></i>
    </button>
  </form>
</div>

    </div>
  </div>
</div>

    </div>
  </div>
</header>

      <main id="content" class="flex-grow">
        


<article role="article" itemscope itemtype="https://schema.org/Article">
  <header>

  


  
  
  
  
  
<div class="relative py-8">
  
    
  <div class="absolute inset-0 bg-cover bg-center filter brightness-75" style="background-image: url('/stories/dados-de-testes-ab-no-google/images/thumbnail_hu93f0ffe847bfb31d907f7e33d3a76905_61241_1024x400_fill_q75_box_smart1.jpg');"></div>
  
  <div class="relative container container-box mx-auto">
    <div class="flex justify-between items-center mb-6 px-2">
      <div class="flex flex-col lg:flex-row">
        
        <address class="text-white text-base" itemprop="author">Henrique</address>
        <time class="text-white text-base lg:ml-2" pubdate datetime="2017-11-30 08:39:00 &#43;0000 UTC" itemprop="datePublished">30/11/2017 08:39:00</time>
        
      </div>
      <a class="badge dark:ring-offset-secondary-darker" href="/categories/analytics" itemprop="articleSection">analytics</a>
    </div>
    <div class="flex flex-col px-2">
      
      <div>
        <h1 class="text-white text-5xl break-words lg:text-6xl lg:break-normal" itemprop="headline">Lidando com diferen√ßas nas ferramentas de testes e de analytics</h1>
      </div>
      <div>
        
        <p class="text-white text-2xl" itemprop="abstract">O n√∫mero de visitantes ou sess√µes que ferramentas de testes online mostram √© diferente do n√∫mero reportado em ferramentas de analytics, mesmo que o teste esteja rodando com 100% do tr√°fego. As vezes a diferen√ßa √© tal que levanta d√∫vidas sobre qual o conjunto de n√∫meros de acessos e convers√µes que devem ser considerados. Como ent√£o fazer com que essa discrep√¢ncia seja a menor poss√≠vel?</p>
        
      </div>
      
    </div>
  </div>
</div>



  </header>
  <div class="bg-secondary hidden dark:bg-neutral lg:block">
    <div class="container container-box mx-auto">
      <div class="px-2">
      <nav aria-label="Breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
  <ul class="flex ml-auto mb-0">
    
  
    
  
    
  

  
  <li class="flex relative pr-7 last:pr-0 dark:filter dark:invert" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
    <a class="text-white no-underline hover:text-white hover:underline dark:hover:text-gray-100" href="/" itemprop="item">
      
      <span class="text-white" itemprop="name">Home</span>
      
    </a>
    <i class="breadcrumb-separator"></i>
  </li>
  

  

  
  <li class="flex relative pr-7 last:pr-0 dark:filter dark:invert" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
    <a class="text-white no-underline hover:text-white hover:underline dark:hover:text-gray-100" href="/stories/" itemprop="item">
      
        <span class="text-white" itemprop="name">Todas as hist√≥rias</span>
      
    </a>
    <i class="breadcrumb-separator"></i>
  </li>
  

  

  
  <li class="flex relative pr-7 last:pr-0 dark:filter dark:invert" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
    <a class="text-white no-underline hover:text-white hover:underline dark:hover:text-gray-100" href="/stories/dados-de-testes-ab-no-google/" aria-current="page" itemprop="item">
      <span class="text-white" itemprop="name">Lidando com diferen√ßas nas ferramentas de testes e de analytics</span>
    </a>
  </li>
  

  </ul>
</nav>



      </div>
    </div>
  </div>
  <div class="container container-box mx-auto">
    <div class="max-w-3xl px-2 mx-auto flex flex-col">
      <main id="post" itemprop="articleBody">
        <strong class="inline-block text-base mb-4 dark:text-white">Tempo estimado para a leitura: 12 minutos</strong>
        <p>Publicado em 30/11/2017 e atualizado em 31/10/2021.</p>
<p>Atualiza√ß√£o 31/10/2021: Na data de publica√ß√£o deste post, a vers√£o 4 do Google Analytics ainda n√£o havia sido publicada. O Google Analytics 4 foi refeito em resposta as legisla√ß√µes de privacidade em diversos pa√≠ses ao redor do mundo. A interface e recursos sofreram diversas modifica√ß√µes, sendo algumas das mais not√°veis a menor depend√™ncia de cookies para identificar usu√°rios e a remo√ß√£o de vis√µes. O rastreio de eventos, utilizado ao longo deste post, difere entre as vers√µes 3 e 4. A vers√£o 4 n√£o utiliza mais os atributos <em>Category</em>, <em>Action</em>, <em>Label</em> e <em>Value</em> nos eventos. Os exemplos deste post utilizam o Google Analytics vers√£o 3.</p>
<p>Tanto ferramentas para testes quanto para analytics far√£o a coleta e o armazenamento de dados que representam usu√°rios. Ambas gravam sess√µes e eventos de convers√£o ao longo do tempo, e exibem estas informa√ß√µes em pain√©is. Ao comparar os dados das duas ferramentas considerando a mesma janela de tempo, no entanto, os n√∫meros n√£o batem. Por que isso acontece?</p>
<h2 id="diferen√ßas-de-implementa√ß√£o-e-configura√ß√£o">Diferen√ßas de implementa√ß√£o e configura√ß√£o</h2>
<p>Ferramentas de testes e ferramentas de analytics <a href="https://support.abtasty.com/hc/en-us/articles/201747527-There-are-differences-in-data-between-AB-Tasty-and-my-analytics-tool" target="_blank" rel="noopener">s√£o bem diferentes uma da outra</a>. Mesmo que as informa√ß√µes sejam as mesmas, os procedimentos para coleta, tratamento e armazenamento diferem entre estas ferramentas. Mesmo com a garantia de que a implementa√ß√£o das ferramentas foi feita corretamente e que n√£o h√° erros na coleta dos dados, os n√∫meros v√£o continuar diferentes. A d√∫vida ent√£o passa a ser: qual das ferramentas devo considerar ao elaborar um relat√≥rio?</p>
<p>Optar por visualizar os n√∫meros apenas dentro do painel de testes √© uma boa op√ß√£o quando esses n√∫meros n√£o est√£o amarrados a outras m√©tricas da empresa. Em outras palavras, quando a m√©trica que est√° sendo medida possui baixo n√≠vel de correla√ß√£o com outras. Um exemplo de uma m√©trica que pode ter alta correla√ß√£o com outras √© o CTR em um elemento de p√°gina que passa os visitantes entre etapas de funil. Nesse caso a dificuldade √© usar os n√∫meros reportados no painel da ferramenta de testes para calcular a taxa de visitantes √∫nicos ou a de sess√µes que passa por cada etapa do funil.</p>
<p>Falando de ferramentas de analytics, elas computam diversas m√©tricas ligadas a comportamentos do tr√°fego dentro do produto. A primeira diferen√ßa em rela√ß√£o a ferramentas de teste se d√° na dura√ß√£o dos cookies: a vers√£o 3 do Google Analytics, por exemplo, instala cookies com dura√ß√£o de 30 minutos ap√≥s inatividade, o que significa que visitantes inativos por mais de 30 minutos ter√£o os cookies deletados de seus navegadores. Ferramentas de teste usam cookies com dura√ß√µes bem maiores, e cada fabricante d√° um tempo de dura√ß√£o padr√£o. A defini√ß√£o padr√£o de cookies pode ou n√£o ser suficiente, depender√° do tipo de produto. Imagine que uma plataforma de v√≠deos pode n√£o querer que a dura√ß√£o padr√£o de cookies seja 30 minutos de inatividade, pois pode ocorrer de seus visitantes assistirem a v√≠deos com dura√ß√£o superior a essa. Como pode n√£o haver intera√ß√£o com a p√°gina durante a execu√ß√£o do v√≠deo, o tempo decorrido durante a execu√ß√£o do v√≠deo √© tido como sendo de inatividade. A diferen√ßa no tempo de validade dos cookies pode fazer com que os mesmos visitantes sejam contados mais de uma vez em uma ferramenta e n√£o na outra.</p>
<p>O tempo e o local de carregamento dos scripts das ferramentas de analytics e de testes tamb√©m pode causar diferen√ßas. Scripts referenciados no rodap√© de uma p√°gina precisam esperar a p√°gina toda ser servida para ent√£o serem carregados, caso n√£o estejam sendo pr√© carregados. Se a p√°gina cont√©m muitos elementos multim√≠dia e/ou din√¢micos, o carregamento pode demorar. Outra situa√ß√£o perigosa est√° na forma ass√≠ncrona de carregamento dos scripts. Scripts, folhas de estilo, imagens e outros elementos que comp√µem uma p√°gina podem ser carregados de forma <strong>s√≠ncrona</strong> ou <strong>ass√≠ncrona</strong>. Carregamento s√≠ncrono significa que, quando o navegador estiver fazendo a leitura da p√°gina a ser exibida e ela faz refer√™ncia a documentos externos, como um script, o restante do carregamento da p√°gina ser√° interrompido para que o arquivo externo possa ser inclu√≠do com o restante da p√°gina. O carregamento ass√≠ncrono faz com que os carregamentos dos arquivos externos e da p√°gina aconte√ßam simultaneamente. O que acontece no carregamento ass√≠ncrono, em particular, √© que a p√°gina pode ter carregado e o documento externo ainda estar carregando. Se o visitante deixa a p√°gina ou o produto antes que a ferramenta possa carregar, ele n√£o √© contabilizado. O teste neste caso n√£o ter√° sequer iniciado. Em outros casos o teste pode iniciar depois que o visitante estiver interagindo com a p√°gina e neste caso a experi√™ncia de navega√ß√£o ser√° alterada se ele cair nas varia√ß√µes de tratamento, pois as altera√ß√µes do teste ser√£o aplicadas na frente dele (efeito conhecido como <em>Flash of Original Content</em>, ou FOOC).</p>
<h2 id="e-o-google-optimize">E o Google Optimize?</h2>
<p>O <a href="https://www.google.com/analytics/optimize/" target="_blank" rel="noopener">Google Optimize</a> √© uma ferramenta para testes A/B, A/B/N, mvt e split criada pela Google. Por ser parte da su√≠te de produtos Google, possui integra√ß√£o nativa com o Google Analytics. Para criar testes com ela, √© necess√°rio fornecer o ID de uma vis√£o do Google Analytics, na vers√£o 3, para que o Optimize alimente o relat√≥rio apropriado, que fica em Behavior &gt; Experiments. Uma vez que o Optimize tenha permiss√£o de acesso a vis√£o, os dados de testes estar√£o dispon√≠veis na ferramenta. Mesmo o Optimize apresenta diferen√ßas entre o Analytics e seu painel interno de relat√≥rios. As diferen√ßas s√£o tanto entre o relat√≥rio de experimentos no Google Analytics e no painel da ferramenta quanto o relat√≥rio de experimentos no Google Analytics e os demais relat√≥rios do pr√≥prio analytics. <a href="https://support.google.com/360suite/optimize/answer/6323229?hl=en" target="_blank" rel="noopener">A documenta√ß√£o</a> diz que isso acontece por diferen√ßas na forma como os c√°lculos acontecem entre as ferramentas, e tamb√©m por diferen√ßa no tempo de alimenta√ß√£o dos relat√≥rios. Enquanto o Google Analytics recebe os dados do teste com frequ√™ncia, o Optimize recebe cargas de dados do Analytics a cada 12 horas. A recomenda√ß√£o do Google √© sempre olhar para os dados do painel do Optimize para tomar decis√µes.</p>
<h2 id="o-painel-de-eventos">O painel de eventos</h2>
<p>V√°rias ferramentas de testes possuem conectores com o Google Analytics que facilitam o envio de informa√ß√µes para a ferramenta, mas possuem limita√ß√µes similares as do Google Optimize. Uma forma que encontrei para ajudar na concilia√ß√£o dos n√∫meros foi usar o recurso de eventos. Ferramentas de analytics conseguem registrar eventos personalizados. Esses eventos podem ser configurados por pessoas desenvolvedoras direto na aplica√ß√£o ou por uma equipe de marketing, caso uma ferramenta de gest√£o de tags esteja instalada. Um exemplo de tal ferramenta √© o <a href="https://www.google.com/analytics/tag-manager/" target="_blank" rel="noopener">Google Tag Manager</a> (GTM).</p>
<p>Eventos s√£o a√ß√µes de interesse. Exemplos de eventos s√£o:</p>
<ul>
<li>Acessar uma p√°gina;</li>
<li>Clicar em um bot√£o;</li>
<li>Assistir a um v√≠deo;</li>
<li>Baixar um arquivos.</li>
</ul>
<p>Uma vez monitorados, informa√ß√µes sobre os eventos s√£o enviadas para a ferramenta de analytics. No caso da vers√£o 3 do Google Analytics, um disparo de evento gera as seguintes informa√ß√µes:</p>
<ul>
<li><em>Category</em>: identificador da categoria de eventos;</li>
<li><em>Action</em>: identificador da a√ß√£o que disparou o evento. Exemplos podem ser play, click, download e etc;</li>
<li><em>Label</em>: uma etiqueta com informa√ß√µes adicionais sobre o evento, que o distingue de outros com a mesma a√ß√£o e que estejam na mesma categoria;</li>
<li><em>Value</em>: um valor num√©rico associado ao evento. Pode ser um valor monet√°rio ou algum n√∫mero que quantifique a a√ß√£o executada.</li>
</ul>
<p>Esses atributos possuem uma rela√ß√£o de hierarquia, de forma que evento cont√©m categorias, categorias cont√©m a√ß√µes, a√ß√µes cont√©m labels e labels cont√©m valores.</p>
<h2 id="mapeamento-de-eventos-de-teste-no-google-analytics-vers√£o-3">Mapeamento de eventos de teste no Google Analytics vers√£o 3</h2>
<p>A solu√ß√£o para o problema de diferen√ßa de n√∫meros ser√° registrar eventos na ferramenta de analytics em dois momentos:</p>
<ul>
<li>Um quando o visitante acessa o produto;</li>
<li>Um quando o visitante realiza o evento de convers√£o.</li>
</ul>
<p>Os eventos possuem praticamente as mesmas propriedades em <em>Event</em>, <em>Action</em> e <em>Label</em>. O uso de <em>Value</em> √© opcional. O que vai mudar √© o <em>Action</em>, que vai assumir um valor quando um visitante for selecionado para participar do teste e outro quando o visitante executar o evento de convers√£o. Um diagrama da solu√ß√£o proposta se parece com este:</p>
<figure >
  
  <img data-src="images/figure1-hierarchy-google-events.webp" class="lazy" alt="Hierarquia de eventos na vers√£o 3 do Google Analytics para testes A/B." title="Hierarquia de eventos na vers√£o 3 do Google Analytics para testes A/B." />
  
  
  <figcaption>
    <p>Hierarquia de eventos na vers√£o 3 do Google Analytics para testes A/B. Fonte: Autor.</p>
  </figcaption>
  
</figure>

<h2 id="configura√ß√£o-da-ferramenta-de-testes">Configura√ß√£o da ferramenta de testes</h2>
<p>Para ilustrar o conceito, ser√° apresentada uma proposta de implementa√ß√£o utilizando o Google Optimize e a vers√£o 3 do Google Analytics. O envio de informa√ß√µes para o Google Analytics ser√° feito pelo gerenciador de tags Google Tag Manager.</p>
<p>Em geral, ferramentas de testes possuem tanto um editor de sites do tipo ‚Äúclicar e arrastar‚Äù quanto um para inser√ß√£o de c√≥digo manual. Esses editores de c√≥digo aceitam HTML, CSS e Javascript, e em algumas ferramentas possuem inje√ß√£o de c√≥digos em dois n√≠veis: um global e um local. O editor de scripts global injeta trechos de c√≥digo em todas as varia√ß√µes do teste, enquanto o local √© carregado de acordo com a varia√ß√£o selecionada.</p>
<p>Para o exemplo de implementa√ß√£o a seguir, o c√≥digo ser√° escrito no editor local.</p>
<p>Com o Google Tag Manager instalado, basta chamar o m√©todo push do objeto dataLayer e enviar os dados para um evento que tenha sido registrado no Google Tag Manager:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript">  <span class="nx">dataLayer</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
    <span class="nx">event</span><span class="o">:</span> <span class="s1">&#39;evento_no_gtm&#39;</span><span class="p">,</span>
    <span class="nx">category</span><span class="o">:</span> <span class="s1">&#39;categoria&#39;</span><span class="p">,</span>
    <span class="nx">action</span><span class="o">:</span> <span class="s1">&#39;acao&#39;</span><span class="p">,</span>
    <span class="nx">label</span><span class="o">:</span> <span class="s1">&#39;descricao&#39;</span>
  <span class="p">});</span></code></pre></td></tr></table>
</div>
</div>
<p>Esse atributo &ldquo;event&rdquo; pertence ao objeto dataLayer e faz refer√™ncia a uma tag no Google Tag Manager. Em uma instala√ß√£o da vers√£o 3 do Google Analytics sem o Google Tag Manager, ser√° necess√°rio mandar um disparo do tipo evento para dentro do Google Analytics:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript">  <span class="nx">ga</span><span class="p">(</span><span class="s1">&#39;send&#39;</span><span class="p">,</span> <span class="s1">&#39;event&#39;</span><span class="p">,</span> <span class="s1">&#39;categoria&#39;</span><span class="p">,</span> <span class="s1">&#39;acao&#39;</span><span class="p">,</span> <span class="s1">&#39;descricao&#39;</span><span class="p">);</span></code></pre></td></tr></table>
</div>
</div>
<p>No caso do push com o dataLayer, ser√° feito um disparo de uma tag de evento que enviar√° os dados para o Google Analytics. Dentro do editor de scripts local, cada varia√ß√£o vai receber um trecho de c√≥digo como um dos exemplos, que deve ser disparado em dois momentos diferentes para cada varia√ß√£o do teste. Os par√¢metros ser√£o:</p>
<ul>
<li>category: recomendo usar o nome ou um identificador do teste dentro da categoria;</li>
<li>action: a a√ß√£o ter√° duas op√ß√µes, uma para acesso e outra para convers√£o. Action pode assumir &ldquo;acesso&rdquo; ou &ldquo;convers√£o&rdquo; por exemplo;</li>
<li>label: guardar√° a varia√ß√£o do teste. Pode ser uma letra ou o nome da altera√ß√£o induzida.</li>
</ul>
<p>Category ser√° igual em todas as chamadas ao c√≥digo de disparo, label e action v√£o mudar conforme a varia√ß√£o do teste, e se foi feita uma visita ou uma convers√£o. A segunda chamada ao c√≥digo de disparo do evento deve ser feita somente ap√≥s o evento de convers√£o ter sido disparado, nesse caso √© necess√°rio criar um trigger que escute esse evento:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript">  <span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">cta</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;cta&#39;</span><span class="p">);</span>
    <span class="nx">cta</span><span class="p">.</span><span class="nx">onlick</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// Se usar o Google Tag Manager
</span><span class="c1"></span>      <span class="nx">dataLayer</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
        <span class="nx">event</span><span class="o">:</span> <span class="s1">&#39;evento_no_gtm&#39;</span><span class="p">,</span>
        <span class="nx">category</span><span class="o">:</span> <span class="s1">&#39;categoria&#39;</span><span class="p">,</span>
        <span class="nx">action</span><span class="o">:</span> <span class="s1">&#39;acao&#39;</span><span class="p">,</span>
        <span class="nx">label</span><span class="o">:</span> <span class="s1">&#39;descricao&#39;</span>
      <span class="p">});</span>

      <span class="c1">// Se n√£o usar o Google Tag Manager
</span><span class="c1"></span>      <span class="nx">ga</span><span class="p">(</span><span class="s1">&#39;send&#39;</span><span class="p">,</span> <span class="s1">&#39;event&#39;</span><span class="p">,</span> <span class="s1">&#39;categoria&#39;</span><span class="p">,</span> <span class="s1">&#39;acao&#39;</span><span class="p">,</span> <span class="s1">&#39;descricao&#39;</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>Dica: opte por usar javascript nativo quando poss√≠vel para evitar a depend√™ncia de outras bibliotecas, o que pode tornar o tempo de carregamento maior e aumentar a possibilidade de o conte√∫do da p√°gina &ldquo;piscar&rdquo; diante do usu√°rio (FOOC).</p>
<p>O uso de window.onload garante que o bot√£o s√≥ ser√° acessado ap√≥s ter sido carregado. Pode acontecer de o trecho de c√≥digo javascript carregar antes da p√°gina e ele tentar acessar elementos que ainda n√£o foram carregados. O uso de DOMContentLoaded fica a cargo da pessoa desenvolvedora, considerando <a href="https://caniuse.com/#search=DOMContentLoaded" target="_blank" rel="noopener">que navegadores antigos n√£o reconhecem este m√©todo</a>.</p>
<p>O c√≥digo completo a ser adicionado a cada varia√ß√£o do teste:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript">  <span class="c1">// C√≥digo executado assim que o visitante √© direcionado para uma das varia√ß√µes do teste
</span><span class="c1"></span>  <span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Se n√£o usar Google Tag Manager d√° pra fazer com ga(&#39;send&#39;, &#39;event&#39;, &#39;teste_no_cta&#39;, &#39;acesso&#39;, &#39;grupo_controle&#39;)
</span><span class="c1"></span>    <span class="nx">dataLayer</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
      <span class="nx">event</span><span class="o">:</span> <span class="s1">&#39;testes_tag&#39;</span><span class="p">,</span> <span class="c1">// Nome da tag no Google Tag Manager
</span><span class="c1"></span>      <span class="nx">category</span><span class="o">:</span> <span class="s1">&#39;teste_no_cta&#39;</span><span class="p">,</span> <span class="c1">// Nome do teste
</span><span class="c1"></span>      <span class="nx">action</span><span class="o">:</span> <span class="s1">&#39;acesso&#39;</span><span class="p">,</span> <span class="c1">// Acesso a p√°gina do teste
</span><span class="c1"></span>      <span class="nx">label</span><span class="o">:</span> <span class="s1">&#39;grupo-controle&#39;</span> <span class="c1">// O visitante caiu no grupo de controle.
</span><span class="c1"></span>    <span class="p">});</span>

    <span class="kd">var</span> <span class="nx">btn</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;cta&#39;</span><span class="p">);</span>

    <span class="nx">btn</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// Se n√£o usar Google Tag Manager d√° pra fazer com ga(&#39;send&#39;, &#39;event&#39;, &#39;teste_no_cta&#39;, &#39;conversao&#39;, &#39;grupo_controle&#39;)
</span><span class="c1"></span>      <span class="nx">dataLayer</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
        <span class="nx">event</span><span class="o">:</span> <span class="s1">&#39;testes_tag&#39;</span><span class="p">,</span> <span class="c1">// Nome da tag no Google Tag Manager
</span><span class="c1"></span>        <span class="nx">category</span><span class="o">:</span> <span class="s1">&#39;teste_no_cta&#39;</span><span class="p">,</span> <span class="c1">// Nome do teste
</span><span class="c1"></span>        <span class="nx">action</span><span class="o">:</span> <span class="s1">&#39;conversao&#39;</span><span class="p">,</span> <span class="c1">// Convers√£o na p√°gina do teste
</span><span class="c1"></span>        <span class="nx">label</span><span class="o">:</span> <span class="s1">&#39;grupo-controle&#39;</span> <span class="c1">// O visitante caiu no grupo de controle.
</span><span class="c1"></span>      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>Navegue at√© o relat√≥rio de eventos em Behavior &gt; Events &gt; Top Events. Uma vez que o teste tenha iniciado, os eventos de acesso e convers√£o dever√£o ser registrados neste relat√≥rio. Veja a diferen√ßa entre as colunas de eventos e eventos √∫nicos. Como o teste pode funcionar em mais de uma p√°gina ou os visitantes a recarregarem, acompanhe pelos eventos √∫nicos, que n√£o ser√£o atualizados com m√∫ltiplos disparos sendo enviados ao Google Analytics. Para comparar a quantidade de eventos com usu√°rios ou sess√µes, crie um relat√≥rio personalizado em Customization &gt; Custom Reports incluindo usu√°rios √∫nicos e eventos √∫nicos, com quebra por categoria, a√ß√£o e label.</p>
<figure >
  
  <img data-src="images/figure2-google-custom-report.webp" class="lazy" alt="Cria√ß√£o de relat√≥rio personalizado na vers√£o 3 do Google Analytics." title="Cria√ß√£o de relat√≥rio personalizado na vers√£o 3 do Google Analytics." />
  
  
  <figcaption>
    <p>Cria√ß√£o de relat√≥rio personalizado na vers√£o 3 do Google Analytics. Fonte: Autor.</p>
  </figcaption>
  
</figure>

<p>Dessa forma √© poss√≠vel contabilizar acessos individuais e tamb√©m por sess√£o dentro do Google Analytics.</p>
<figure >
  
  <img data-src="images/figure3-google-test-event-dashboard.webp" class="lazy" alt="Painel de m√©tricas de testes A/B na vers√£o 3 do Google Analytics." title="Painel de m√©tricas de testes A/B na vers√£o 3 do Google Analytics." />
  
  
  <figcaption>
    <p>Painel de m√©tricas de testes A/B na vers√£o 3 do Google Analytics. Fonte: Autor.</p>
  </figcaption>
  
</figure>

<p>Ao clicar na categoria do evento, dever√£o ser abertas as a√ß√µes com o n√∫mero de visitantes que participaram do teste e o n√∫mero total de convers√µes. Ao clicar em uma das a√ß√µes (acesso ou convers√£o) o relat√≥rio ir√° mostrar as varia√ß√µes do teste para acessos ou para convers√µes dependendo de qual a√ß√£o tenha sido selecionada. Para ver as categorias, a√ß√µes e labels em uma mesma tabela, basta usar a op√ß√£o de tabela fixa no relat√≥rio personalizado. Os n√∫meros de usu√°rios, sess√µes e eventos √∫nicos dever√£o ficar pr√≥ximos visto que as informa√ß√µes sobre testes s√≥ v√£o para o Google Analytics uma vez que o teste tenha iniciado.</p>
<p>Mesmo que a diferen√ßa de dados entre as ferramentas de testes e de analytics n√£o deixe de existir, os n√∫meros nos pain√©is estar√£o mais pr√≥ximos e ter√£o uma mesma fonte de origem, que √© a ferramenta de testes.</p>

      </main>
      <footer>
        


<div class="h-1 w-16 my-6 bg-gray-900 mx-auto dark:bg-white"></div>
<div class="flex justify-center items-center" itemprop="author" itemscope itemtype="https://schema.org/Person">
  <div class="mr-4 w-3/12 md:w-2/12">
    <img class="rounded-full" src="/images/profiles/henriquesouza/profile.webp" alt="Henrique Freitas Souza" itemprop="image">
  </div>
  <div class="w-9/12 md:w-10/12">
    <address class="font-title dark:text-white" itemprop="name">Henrique Freitas Souza</address>
    
    <p class="mb-auto text-base dark:text-white" itemprop="description">Certa vez li que dados s√£o como res√≠duos nucleares. Desde ent√£o tomo cuidado redobrado com o uso que fa√ßo deles.</p>
    
  </div>
</div>


      </footer>
    </div>
  </div>
</article>

  
  


      </main>
      <footer>
        <div class="bg-secondary-darker">
  <div class="container container-box mx-auto">
    <div class="flex flex-wrap justify-between px-2 lg:px-0">
      <div class="w-full mb-6 last:mb-auto lg:mb-auto lg:p-2 lg:w-2/4">
        <div class="flex items-center mb-4">
          <img src="https://www.automacaodedados.com.br/images/automacaodedados_logo_white.svg" alt="Logo Automa√ß√£o de Dados" class="mr-2 w-16 h-8">
          <span class="font-title inline-block text-white text-base">Automa√ß√£o de Dados</span>
        </div>
        <p class="text-white">Espa√ßo para a divulga√ß√£o de informa√ß√µes que ajudem a democratizar o conhecimento sobre novas tecnologias no Brasil.</p>
      </div>
      <div class="w-full mb-6 last:mb-auto lg:mb-auto lg:p-2 lg:w-1/4">
  <span class="font-title inline-block mb-4 text-white text-base">Todas as categorias</span>
  <nav role="navigation" itemscope itemtype="https://schema.org/SiteNavigationElement">
    <ul class="list-none ml-auto">
      
      <li class="mb-2 last:mb-auto" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a class="text-white no-underline hover:text-white hover:underline dark:hover:text-white" href="/categories/analytics/" itemprop="item">
          <span class="text-white" itemprop="name">Analytics</span>
        </a>
      </li>
      
      <li class="mb-2 last:mb-auto" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a class="text-white no-underline hover:text-white hover:underline dark:hover:text-white" href="/categories/an%C3%A1lise/" itemprop="item">
          <span class="text-white" itemprop="name">An√°lise</span>
        </a>
      </li>
      
      <li class="mb-2 last:mb-auto" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a class="text-white no-underline hover:text-white hover:underline dark:hover:text-white" href="/categories/automa%C3%A7%C3%A3o/" itemprop="item">
          <span class="text-white" itemprop="name">Automa√ß√£o</span>
        </a>
      </li>
      
      <li class="mb-2 last:mb-auto" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a class="text-white no-underline hover:text-white hover:underline dark:hover:text-white" href="/categories/design/" itemprop="item">
          <span class="text-white" itemprop="name">Design</span>
        </a>
      </li>
      
      <li class="mb-2 last:mb-auto" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a class="text-white no-underline hover:text-white hover:underline dark:hover:text-white" href="/categories/empreendedorismo/" itemprop="item">
          <span class="text-white" itemprop="name">Empreendedorismo</span>
        </a>
      </li>
      
      <li class="mb-2 last:mb-auto" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a class="text-white no-underline hover:text-white hover:underline dark:hover:text-white" href="/categories/estat%C3%ADstica/" itemprop="item">
          <span class="text-white" itemprop="name">Estat√≠stica</span>
        </a>
      </li>
      
      <li class="mb-2 last:mb-auto" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a class="text-white no-underline hover:text-white hover:underline dark:hover:text-white" href="/categories/governan%C3%A7a/" itemprop="item">
          <span class="text-white" itemprop="name">Governan√ßa</span>
        </a>
      </li>
      
      <li class="mb-2 last:mb-auto" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a class="text-white no-underline hover:text-white hover:underline dark:hover:text-white" href="/categories/marketing/" itemprop="item">
          <span class="text-white" itemprop="name">Marketing</span>
        </a>
      </li>
      
      <li class="mb-2 last:mb-auto" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a class="text-white no-underline hover:text-white hover:underline dark:hover:text-white" href="/categories/programa%C3%A7%C3%A3o/" itemprop="item">
          <span class="text-white" itemprop="name">Programa√ß√£o</span>
        </a>
      </li>
      
      <li class="mb-2 last:mb-auto" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a class="text-white no-underline hover:text-white hover:underline dark:hover:text-white" href="/categories/visualiza%C3%A7%C3%A3o/" itemprop="item">
          <span class="text-white" itemprop="name">Visualiza√ß√£o</span>
        </a>
      </li>
      
    </ul>
  </nav>
</div>
<div class="w-full mb-6 last:mb-auto lg:mb-auto lg:p-2 lg:w-1/4">
  <span class="font-title inline-block mb-4 text-white text-base">√öltimas hist√≥rias</span>
  <nav role="navigation" itemscope itemtype="https://schema.org/SiteNavigationElement">
    <ul class="list-none ml-auto">
      
      <li class="mb-2 last:mb-auto" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a class="text-white no-underline hover:text-white hover:underline dark:hover:text-white" href="/stories/o-metaverso-pos-meta/" itemprop="item">
          <span class="text-white" itemprop="name">O Metaverso p√≥s Meta</span>
        </a>
      </li>
      
      <li class="mb-2 last:mb-auto" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a class="text-white no-underline hover:text-white hover:underline dark:hover:text-white" href="/stories/construcao-da-identidade-no-espaco-virtual/" itemprop="item">
          <span class="text-white" itemprop="name">Constru√ß√£o da identidade no espa√ßo virtual</span>
        </a>
      </li>
      
      <li class="mb-2 last:mb-auto" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a class="text-white no-underline hover:text-white hover:underline dark:hover:text-white" href="/stories/como-escolher-o-melhor-grafico/" itemprop="item">
          <span class="text-white" itemprop="name">Como escolher o melhor gr√°fico?</span>
        </a>
      </li>
      
    </ul>
  </nav>
</div>

    </div>
  </div>
</div>
<div class="bg-gray-300">
  <div class="container container-box mx-auto">
    <div class="text-center lg:flex lg:justify-between lg:items-center lg:text-left px-2">
      <span class="inline-block text-base dark:text-gray-900">Feito com Hugo &#43; Tailwind e hospedado no Github Pages.</span>
      <div itemscope itemtype="https://schema.org/Language">
        <ul class="ml-auto mb-0">
          
          <li class="inline-block" itemprop="availableLanguage" itemscope itemtype="https://schema.org/Language">
            <a class="px-2 py-1 text-base no-underline hover:text-gray-900 hover:underline dark:text-gray-900 dark:hover:text-gray-900" href="/" itemprop="name">üáßüá∑ Portugu√™s</a>
          </li>
          
          <li class="inline-block" itemprop="availableLanguage" itemscope itemtype="https://schema.org/Language">
            <a class="px-2 py-1 text-base no-underline hover:text-gray-900 hover:underline dark:text-gray-900 dark:hover:text-gray-900" href="/en/" itemprop="name">üá∫üá∏ English</a>
          </li>
          
        </ul>
      </div>
    </div>
  </div>
</div>

      </footer>
    </div>
    <script src="/js/theme.min.js"></script>

    
<script src="/js/lazy.min.js" async></script>

  </body>
</html>
